<!-- sections/header.liquid -->
<header id="header" class="header-default header-style-2">
    <div class="main-header line">
        <div class="container-full px_15 lg-px_40">
            <div class="row wrapper-header align-items-center">
              {% if section.settings.menu != blank %}
                <div class="col-xl-5 tf-md-hidden">
                    <ul class="header-list-categories">
                      {% for link in section.settings.menu.links %}
                        <li class="categories-item">
                          <a href="{{ link.url }}" class="text-uppercase">{{ link.title }}</a>
                        </li>
                      {% endfor %}
                    </ul>
                </div>
              {% endif %}
                <div class="col-md-4 col-3 tf-lg-hidden">
                    <a href="#mobileMenu" data-bs-toggle="offcanvas" aria-controls="offcanvasLeft">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16"
                            fill="none">
                            <path
                                d="M2.00056 2.28571H16.8577C17.1608 2.28571 17.4515 2.16531 17.6658 1.95098C17.8802 1.73665 18.0006 1.44596 18.0006 1.14286C18.0006 0.839753 17.8802 0.549063 17.6658 0.334735C17.4515 0.120408 17.1608 0 16.8577 0H2.00056C1.69745 0 1.40676 0.120408 1.19244 0.334735C0.978109 0.549063 0.857702 0.839753 0.857702 1.14286C0.857702 1.44596 0.978109 1.73665 1.19244 1.95098C1.40676 2.16531 1.69745 2.28571 2.00056 2.28571ZM0.857702 8C0.857702 7.6969 0.978109 7.40621 1.19244 7.19188C1.40676 6.97755 1.69745 6.85714 2.00056 6.85714H22.572C22.8751 6.85714 23.1658 6.97755 23.3801 7.19188C23.5944 7.40621 23.7148 7.6969 23.7148 8C23.7148 8.30311 23.5944 8.59379 23.3801 8.80812C23.1658 9.02245 22.8751 9.14286 22.572 9.14286H2.00056C1.69745 9.14286 1.40676 9.02245 1.19244 8.80812C0.978109 8.59379 0.857702 8.30311 0.857702 8ZM0.857702 14.8571C0.857702 14.554 0.978109 14.2633 1.19244 14.049C1.40676 13.8347 1.69745 13.7143 2.00056 13.7143H12.2863C12.5894 13.7143 12.8801 13.8347 13.0944 14.049C13.3087 14.2633 13.4291 14.554 13.4291 14.8571C13.4291 15.1602 13.3087 15.4509 13.0944 15.6653C12.8801 15.8796 12.5894 16 12.2863 16H2.00056C1.69745 16 1.40676 15.8796 1.19244 15.6653C0.978109 15.4509 0.857702 15.1602 0.857702 14.8571Z"
                                fill="currentColor"></path>
                        </svg>
                    </a>
                </div>
                {% if section.settings.show_logo %}
                <div class="col-xl-2 col-md-4 col-6 text-center">
                    <a href="{{ shop.url }}" class="logo-header">
                      {% if settings.logo %}
                        {{ settings.logo |  image_url: width: settings.logo_width |  image_tag  }}
                      {%  else %}
                        {{ shop.name }}
                      {% endif %}
                    </a>
                </div>
                {% endif %}

                <div class="col-xl-5 col-md-4 col-3">
                    <ul class="nav-icon d-flex justify-content-end align-items-center gap-20">
                        <li class="nav-search"><a href="#canvasSearch" data-bs-toggle="offcanvas"
                                aria-controls="offcanvasLeft" class="nav-icon-item"><i
                                    class="icon icon-search"></i></a></li>
                        <li class="nav-account"><a href="#login" data-bs-toggle="modal" class="nav-icon-item"><i
                                    class="icon icon-account"></i></a></li>
                        <li class="nav-wishlist"><a href="wishlist.html" class="nav-icon-item"><i
                                    class="icon icon-heart"></i><span class="count-box">0</span></a></li>
                        <li class="nav-cart" id="header-cart-icon">
                            <a href="#shoppingCart" data-bs-toggle="modal" class="nav-icon-item">
                            <i class="icon icon-bag"></i>
                            <span class="count-box">
                                {%- if cart.item_count > 99 -%}
                                    99+
                                {%- else -%}
                                    {{ cart.item_count }}
                                {%- endif -%}
                            </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% assign block = section.blocks.first %}
    {% assign links = block.settings.submenu.links %}
    {% if block.type == 'submenu' %}
    <div class="header-bottom line" {{ block.shopify_attributes }}>
        <div class="container-full px_15 lg-px_40">
            <div class="wrapper-header d-flex justify-content-center align-items-center">
                <nav class="box-navigation text-center">
                    <ul class="box-nav-ul d-flex align-items-center justify-content-center gap-30">
                        {% for link in links %}
                            <li class="menu-item{% unless block.settings.enable_megamenu %} position-relative{% endunless %}">
                                {% if link.links.size > 0 %}
                                <a href="{{ link.title }}" class="item-link">{{ link.title }}<i class="icon icon-arrow-down"></i></a>
                                    {% if block.settings.enable_megamenu %}
                                    <div class="sub-menu mega-menu">
                                        <div class="container">
                                            <div class="row">
                                                {% for child in link.links %}
                                                <div class="{% if block.settings.enable_collections %}col-lg-2{% else %}col-lg-4{% endif %}">
                                                    <div class="mega-menu-item">
                                                        <div class="menu-heading">
                                                            {{ child.title }}
                                                        </div>
                                                        {% if child.links.size > 0 %}
                                                        <ul class="menu-list">
                                                            {% for grandchild in child.links %}
                                                            <li><a href="{{ grandchild.url }}"
                                                                    class="menu-link-text link">{{ grandchild.title }}</a></li>
                                                            {% endfor %}
                                                        </ul>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                {% endfor %}
                                                {% assign active_item = false %}
                                                {% assign items = block.settings.selected_items |  split: ', ' | join: ' ' %}
                                                {% if items contains link.title %}
                                                    {% assign active_item = true %}
                                                {% endif %}
                                                {% if block.settings.enable_collections and block.settings.enable_megamenu and active_item %}
                                                {% if block.settings.collection_1 != blank %}
                                                <div class="col-lg-3">
                                                    <div class="collection-item hover-img">
                                                        <div class="collection-inner">
                                                            <a href="{{ block.settings.collection_1.url }}" class="collection-image img-style">
                                                                {% if block.settings.collection_img_1 %}
                                                                    {{ block.settings.collection_img_1 |  image_url: width: 300 | image_tag  }}
                                                                {% else %}
                                                                    {% if block.settings.collection_1.featured_image %}
                                                                    <img class="lazyload"
                                                                        data-src="{{ block.settings.collection_1.featured_image |  image_url }}"
                                                                        src="{{ block.settings.collection_1.featured_image |  image_url }}"
                                                                        alt="{{ block.settings.featured_image.alt }}">
                                                                    {% else %}
                                                                        {{ 'collection-1' |  placeholder_svg_tag }}
                                                                    {% endif %}
                                                                {% endif %}
                                                            </a>
                                                            <div class="collection-content">
                                                                <a href="{{ block.settings.collection_1.url }}"
                                                                    class="tf-btn hover-icon btn-xl collection-title fs-16"><span>{{ block.settings.collection_1.title }}</span><i
                                                                        class="icon icon-arrow1-top-left"></i></a>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endif %}
                                                {% if block.settings.collection_2 != blank %}
                                                <div class="col-lg-3">
                                                    <div class="collection-item hover-img">
                                                        <div class="collection-inner">
                                                            <a href="{{ block.settings.collection_2.url }}" class="collection-image img-style">
                                                                {% if block.settings.collection_img_2 %}
                                                                    {{ block.settings.collection_img_2 |  image_url: width: 300 | image_tag  }}
                                                                {% else %}
                                                                    {% if block.settings.collection_2.featured_image %}
                                                                    <img class="lazyload"
                                                                        data-src="{{ block.settings.collection_2.featured_image |  image_url }}"
                                                                        src="{{ block.settings.collection_2.featured_image |  image_url }}"
                                                                        alt="{{ block.settings.featured_image.alt }}">
                                                                    {% else %}
                                                                        {{ 'collection-2' |  placeholder_svg_tag }}
                                                                    {% endif %}
                                                                {% endif %}
                                                            </a>
                                                            <div class="collection-content">
                                                                <a href="{{ block.settings.collection_2.url }}"
                                                                    class="tf-btn hover-icon btn-xl collection-title fs-16"><span>{{ block.settings.collection_2.title }}</span><i
                                                                        class="icon icon-arrow1-top-left"></i></a>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    {% else %}
                                        <div class="sub-menu submenu-default">
                                        <ul class="menu-list">
                                            {% for child in link.links %}
                                            <li {% if child.links.size > 0 %}class="menu-item-2"{% endif %}>
                                                <a href="{{ child.url }}" class="menu-link-text link text_black-2">{{ child.title }}</a>
                                                {% if child.links.size > 0 %}
                                                <div class="sub-menu submenu-default">
                                                    <ul class="menu-list">
                                                        {% for grandchild in child.links %}
                                                            <li><a href="{{ grandchild.url }}"
                                                                class="menu-link-text link text_black-2">{{ grandchild.title }}</a>
                                                            </li>
                                                        {% endfor %}                                                        
                                                    </ul>
                                                </div>
                                                {% endif %}
                                            </li>
                                            {% endfor %}

                                        </ul>
                                    </div>
                                    {% endif %}
                                {% else %}
                                <a href="{{ link.url }}" class="item-link">{{ link.title }}</a>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                </nav>
                <ul class="header-list-categories tf-lg-hidden">
                    {% for link in section.settings.menu.links %}
                        <li class="categories-item">
                          <a href="{{ link.url }}" class="text-uppercase">{{ link.title }}</a>
                        </li>
                      {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    {% endif %}
</header>
<!-- /header -->

{% schema %}
  {
    "name": "Header",
    "enabled_on": {"groups": ["header"]},
    "settings": [
      {
        "type": "checkbox",
        "id": "show_logo",
        "label": "Show Logo",
        "default": true,
        "info": "Add your logo from theme settings"
      },
      {
        "type": "link_list",
        "id": "menu",
        "label": "Main menu",
        "default": "main-menu"
      }
    ],
    "blocks": [
      {
        "type": "submenu",
        "name": "Submenu",
        "limit": 1,
        "settings": [
          {
            "type": "link_list",
            "id": "submenu",
            "label": "Select menu"
          },
          {
            "type": "checkbox",
            "id": "enable_megamenu",
            "label": "Enable megamenu",
            "default": true
          },
          {
            "type": "checkbox",
            "id": "enable_collections",
            "label": "Enable Collections",
            "default": true
          },
          {
            "type": "text",
            "id": "selected_items",
            "label": "Menu items",
            "info": "Insert comma(,) separeted value. i.e: Shop, Pages"
          },
          {
            "type": "collection",
            "id": "collection_1",
            "label": "First collection"
          },
          {
            "type": "image_picker",
            "id": "collection_img_1",
            "label": "Collection image 1"
          },
          {
            "type": "collection",
            "id": "collection_2",
            "label": "Second collection"
          },
          {
            "type": "image_picker",
            "id": "collection_img_2",
            "label": "Collection image 2"
          },
        ]
      }
    ]
  }
{% endschema %}
